# AI-Консультант по Жилищному Кодексу РФ

## Описание проекта
Данный проект представляет собой консультанта по юридическим вопросам, связанным с Жилищным Кодексом РФ. 
Система использует модель AI для ответа на вопросы пользователей, основываясь на базе знаний и истории взаимодействий.

## Перед запуском
Проект использует модель **GPT-4o-mini-2024-07-18** через API OpenAI. Для использования сервиса необходимо иметь **API-ключ OpenAI** и средства на балансе. 
API-ключ необходимо указывать в файле **.env**.

Проект также использует **DynamoDB** в качестве базы данных. Для корректной работы необходимо предварительно запустить базу данных. При первом запуске проекта в **DynamoDB** создается таблица `Users`, в которой будет храниться информация о пользователях.

Базу данных можно запустить с помощью следующей команды:
```sh
docker run -p 8000:8000 amazon/dynamodb-local
```

Если база данных запущена локально, укажите следующие параметры подключения в файле **.env**:
```sh
# DynamoDB Configuration
DYNAMODB_ENDPOINT=http://172.17.0.1:8000
AWS_ACCESS_KEY_ID=dummy
AWS_SECRET_ACCESS_KEY=dummy
AWS_REGION=us-west-2
```

### Пример .env файла
Создайте файл `.env` в корневой директории проекта и укажите в нем следующие параметры:
```sh
# OpenAI API Key
OPENAI_API_KEY=...

# DynamoDB Configuration
DYNAMODB_ENDPOINT=http://172.17.0.1:8000
AWS_ACCESS_KEY_ID=dummy
AWS_SECRET_ACCESS_KEY=dummy
AWS_REGION=us-west-2
```

## Запуск проекта
Для запуска проекта с использованием Docker выполните следующие команды:

1. Соберите контейнеры:
   ```sh
   docker-compose build
   ```
2. Запустите сервисы:
   ```sh
   docker-compose up
   ```
3. После запуска, API будет доступно по адресу: `http://localhost:8080`

## Функционал
- **Ответы на юридические вопросы** по Жилищному Кодексу РФ.
- **Сохранение истории диалогов** для формирования контекста запросов.
- **Использование базы знаний**, хранящей юридическую информацию.
- **Обновление информации о пользователе**.

## Доступные эндпоинты
### Главная страница
**`GET /`**  
Отображает HTML-страницу с основным интерфейсом.

### Работа с пользователями
- **`GET /users`** - Получение списка всех пользователей.
- **`GET /add_user`** - Форма для добавления нового пользователя.
- **`POST /add_user`** - Добавление нового пользователя или обновление информации.
  - Параметры (JSON):
    ```json
    {
      "user_id": "123",
      "name": "Иван Иванов",
      "birthday": "01.01.1990",
      "user_info": "Дополнительная информация"
    }
    ```

### Работа с вопросами
- **`GET /process_question`** - HTML-страница для взаимодействия с консультантом.
- **`POST /process_question`** - Отправка вопроса и получение ответа.
  - Параметры (JSON):
    ```json
    {
      "user_id": "123",
      "question": "Как приватизировать квартиру?",
      "use_user_info": true,
      "use_knowledge_base": true,
      "use_conversation_history": true
    }
    ```
  - Ответ:
    ```json
    {
      "answer": "Для приватизации квартиры необходимо...",
      "metadata": {
        "input_tokens": 100,
        "output_tokens": 200
      }
    }
    ```

## Разработчики
Проект разработан для предоставления юридических консультаций на основе искусственного интеллекта.

## Лицензия
MIT License

